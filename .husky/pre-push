branch="$(git rev-parse --abbrev-ref HEAD)"

echo "ğŸ§ª Running tests before pushing..."

if ! pnpm test; then
  if [ "$branch" = "main" ]|| [ "$branch" = "develop" ]; then
    echo "âŒ Tests failed. Push aborted on $branch."
    exit 1
  else
    echo "âš ï¸ Tests failed, but push will continue on branch $branch."
  fi
else
  echo "âœ… Tests passed."
fi