#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

branch="$(git rev-parse --abbrev-ref HEAD)"

echo "ğŸ” Running lint-staged..."
pnpm exec lint-staged

if [ "$branch" = "main" ] || [ "$branch" = "develop" ]; then
  echo "ğŸ§ª Running tests for $branch..."
  if ! pnpm test; then
    echo "âŒ Tests failed. Commit aborted on $branch."
    exit 1
  fi
else
  echo "â­ï¸  Skipping tests on branch '$branch'."
fi

echo "âœ… Commit checks passed."
